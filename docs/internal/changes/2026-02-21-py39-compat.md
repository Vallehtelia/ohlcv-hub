# 2026-02-21: Python 3.9 compatibility (PEP 604 union syntax)

## What changed

Replaced PEP 604 union syntax (`X | None`) with `typing.Optional[X]` so the codebase runs on Python 3.9. No runtime behavior changes.

## Files touched

- **ohlcv_hub/errors.py** — Added `from typing import Optional`; `status_code: int | None` → `Optional[int]`.
- **ohlcv_hub/providers/alpaca.py** — `BarsResponse.currency`, `fetch_stock_bars` params `feed`/`asof`, and local variables `currency`/`page_token`: all `str | None` → `Optional[str]`.
- **ohlcv_hub/dataset.py** — Added `from typing import Optional`; `feed: str | None` → `Optional[str]` in `build_daily_dataset` and `build_weekly_dataset`.
- **ohlcv_hub/normalize.py** — Added `Optional` to imports; `currency: str | None` → `Optional[str]` in `bars_dict_to_dataframe`.

## How to test

- `pytest -q` — all tests should pass.
- `python -m compileall ohlcv_hub` — no syntax errors.
- CI on Python 3.9 should pass after push.
